# 静态数码管
由多个发光二极管封装在一起的“8”字型显示器，共阳极、共阴极就是LED同极都接在一个引脚上
<img width="1124" height="759" alt="39ce9519a0c09338efc57540d1e20f77" src="https://github.com/user-attachments/assets/2d7b6b23-f969-467d-bc92-42acc9e7ebff" />
<img width="606" height="464" alt="2c67fda2c1d3fa90ede22938568e6626" src="https://github.com/user-attachments/assets/af943230-712f-4412-a457-1b740670e60e" />

## 位选
控制哪一个数码管亮
## 段选
控制哪一个LED发亮（1为高电平，0为低电平）共阴极与共阳极的段码位数共轭
## 静态显示代码
```c
#include <REGX52.H>
char a[10] = {0X3F,0X06,0X5B,0X4F,0X66,0X6D,0X7D,0X07,0X7F,0X6F};

void delay(int xms)	
{
	int i,j;
	for(i=0;i<xms;i++){
		for(j=0;j<120;j++);
	}
}

void seg()
{
	int i;
	for( i = 0;i<10;i++){
		P2 = a[i];
		delay(800);
	}
}
void main()
{
	
	while(1)
	{
		seg();
	}
}
```
## 演示视频

https://github.com/user-attachments/assets/ef753056-e1e9-4166-99ed-6dd5718d1b69

演示为共阴极，若为共阳极则接地改为接电源，使数组位数共轭
## 数码管的动态演示
利用低延迟函数和人眼视觉残留从而使其看起来像是同时显示的
### 138译码器
简化电路，减少L口的使用，输出信号为低电平
## 演示视频
https://github.com/user-attachments/assets/e89f931c-0cf3-4ad8-a72f-67921900c153

## 代码
```c
#include <REGX52.H>
char number[10] = {0X3F,0X06,0X5B,0X4F,0X66,0X6D,0X7D,0X07,0X7F,0X6F};
char str[5] = {0X76,0X79,0X38,0X38,0X3F};
char wei[8] = {0X00,0X01,0X02,0X03,0X04,0X05,0X06,0X07};
int j;
void delay(int xms)	
{
	int i,j;
	for(i=0;i<xms;i++){
		for(j=0;j<120;j++);
	}
}

void seg()
{
	int i;
	for( i = 0;i<8;i++){
		P3 = wei[i];
		P2 = number[j];
		delay(800);
		if(++j>9){
			j = 0; 
		}
	}
}
void main()
{
	
	while(1)
	{
		seg();
	}
}
```
## 矩阵按键
通过行列扫描确定哪一个按键按下
### 行列扫描即为先初始化L口的一个值，然后检测值的变化来确定是哪一个按键被按下
### 15，16日任务有点重复故一次完成，密码锁的话有时间再做了（过年了），后日记：做的时候debug真痛苦
- 发现keil5是属于比较老的一类编译器，不会检查数组越界，变量定义必须在语句外。
### 代码
```c
#include <REGX52.H>
char number[16] = {0X3F,0X06,0X5B,0X4F,0X66,0X6D,0X7D,0X07,0X7F,0X6F,0X77,0X7C,0X39,0X5E,0X79,0X71};
char a[16] = {0XEE,0XED,0xEB,0XE7,0XDE,0XDD,0XDB,0XD7,0XBE,0XBD,0XBB,0XB7,0X7E,0X7D,0X7B,0X77};
char num = -1;
void delay(int xms)	
{
	int i,j;
	for(i=0;i<xms;i++){
		for(j=0;j<120;j++);
	}
}
void key_scan()
{
	char temp0,temp1,temp;
	int i;
	P1=0XF0;
	if(P1!=0XF0)
	{
		delay(20);
		temp0 = P1;
		P1 = 0X0F;
		if(P1!=0XF0)
		{
			delay(20);
			temp1 = P1;
		}
	}
	temp = temp0 + temp1;
	for(i=0;i<16;i++)
	{
		if(temp == a[i])
		{
			num = i;
		}
	}
}
void display()
{
	if(num>=0){P2 = number[num];}
}
void main()
{
	P2 = 0X00;
	while(1){
		key_scan();
		display();
	}
}
```
### 演示视频

https://github.com/user-attachments/assets/203b7eaf-2e56-45f3-af8f-41d6aecad231

## 简易密码锁
密码为0X07EA，2026的16进制表达；依次按下正确的密码后蓝灯亮500ms，错误则黄灯亮500ms，全部输入正确后绿灯常亮
### 代码
```c
#include <REGX52.H>
char number[16] = {0X3F,0X06,0X5B,0X4F,0X66,0X6D,0X7D,0X07,0X7F,0X6F,0X77,0X7C,0X39,0X5E,0X79,0X71};
char a[16] = {0XEE,0XED,0xEB,0XE7,0XDE,0XDD,0XDB,0XD7,0XBE,0XBD,0XBB,0XB7,0X7E,0X7D,0X7B,0X77};
char num = -1;
int flag = 0;
void delay(int xms)	
{
	int i,j;
	for(i=0;i<xms;i++){
		for(j=0;j<120;j++);
	}
}
void key_scan()
{
	char temp0,temp1,temp;
	int i;
	if(flag!=4)P3 = 0XFF;
	temp0 = temp1 = temp = 0XFF;
	P1=0XF0;
	while(P1==0XF0);
		delay(20);
		temp0 = P1;
		P1 = 0X0F;
		if(P1!=0XF0)
		{
			delay(20);
			temp1 = P1;
		}
	temp = temp0 + temp1;
	for(i=0;i<16;i++)
	{
		if(temp == a[i])
		{
			num = i;
		}
	}
}
void display()
{
	if(num>=0){P2 = number[num];
		if(number[num] == number[0])
	{
		P3_1 = 0;
		delay(500);
		flag++;
		return;
	}else if(number[num] != number[0]&&flag==0) 
		{
			P3_2 = 0;
			flag = 0;
			delay(500);
		}
	if(number[num] == number[7]&&flag == 1){
		P3_1 = 0;
		delay(500);
		flag++;
		return;
	}else if(number[num] != number[7]&&flag == 1){
		P3_2 = 0;
		flag = 0;
		delay(500);
	}
	if(number[num] == number[14]&&flag == 2){
		P3_1 = 0;
		delay(500);
		flag++;
		return;
	}else if(number[num] != number[14]&&flag == 2){
		P3_2 = 0;
		flag = 0;
		delay(500);
	}
	if(number[num] == number[10]&&flag == 3){
		P3_1 = 0;
		delay(500);
		P3_1 = 1;
		P3_0 = 0;
		flag++;
		return;
	}else if(number[num] != number[10]&&flag == 3){
		P3_2 = 0;
		flag = 0;
		delay(500);
	}
	}
}
void main()
{
	P2 = 0X00;
	while(1){
		key_scan();
		display();
	}
}
```
### 演示视频

https://github.com/user-attachments/assets/6aabb9bb-046f-4335-9cae-1ccd3683b5f0


