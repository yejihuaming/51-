# 通信基础概念
串口就是一种实现双向通信的设备，简单的双向串口有两根通信线（发送端TXD和接收端RXD），这两根线要交叉连接，单向传输时，可以只接一根
## 全双工
通信双方可以在同一时刻互相传输数据，电话，电脑串口、51单片机
## 半双工
通信双方可以互相传输数据，但必须分时，复用一根数据线，对讲机，遥控车
## 单工
只能单向传输，广播、电视、遥控器
## 异步
通信双方各自约定通信频率
## 同步
通信双方靠额外一根时钟线来约定通信速率
## 总线
连接各个设备的传输线路
# 串口通信原理（UART）
异步、串行、全双工
- SBUF：数据缓冲计时器
- 写SBUF（发送）读SBUF（接收）
- SCON：串口控制寄存器
- smod:波特率是否翻倍
- 定时器1：产生波特率
- 模式1：8位UART，波特率可变。P3.0与RXD共用，P3.1与TXD共用
- 波特率：串口通信速率（发送与接收各数据位的间隔时间）
- 检验位：用于数据验证
- 停止位：用于数据帧间隔
### 工作流程：
- 发送：
写数据到 SBUF
硬件自动加起始位、停止位
逐位从 TX 发出
发完置位 TI 标志
- 接收：
RX 检测到下降沿（起始位）
按波特率逐位采样
收到 8 位数据 → 放进 SBUF
置位 RI 标志 → 通知 CPU 读数据
## 8位异步通信方式
- 数据格式：1位起始位（0），SBUF中的8位数据位（低位在前），1位停止位（1）.
- 波特率：2^SMOD*(T1的溢出率)/32
- T1的溢出率 = 晶振频率（fosc）/（12 * （256-初值）
- T1的初值 = 256-fosc*2^smod/(12 * 波特率 * 32)
<img width="969" height="669" alt="Snipaste_2026-02-25_18-38-44" src="https://github.com/user-attachments/assets/dad4b1eb-446d-4867-8313-d9a60b1b83a3" />

## 代码
```c
#include <REGX52.H>
char recdat = 0;flag =0;
void inttscon()
{
	SCON = 0X50;
	TMOD = 0X20;
	TH1 = 0XFD;
	TL1 = 0XFD;
	ES = 1;
	EA = 1;
	TR1 = 1;
}
void senddat()
{
	SBUF = recdat;
	while(!TI);
	TI = 0;
}
void main()
{
	inttscon();
	while(1)
	{
		if(flag==1)
		{
			senddat();
			flag = 0;
		}
	}
}
void scon_isr() interrupt 4
{
	recdat = SBUF;
	RI =0;
	flag = 1;
}
```
## 演示视频
https://github.com/user-attachments/assets/5c4aef35-bdac-4cb3-9dd4-3045d9e09690

